# RAG 搜索测试页面

这是一个完整的RAG（Retrieval-Augmented Generation）搜索测试界面，用于测试和评估RAG系统的性能。

## 功能特性

### 1. 搜索测试界面 (`SearchTestForm`)
- **查询输入**: 多行文本域支持复杂查询
- **参数控制**: 
  - 最大结果数量 (1-50，使用滑块控制)
  - 相似度阈值 (0-1，使用滑块精确控制)
  - 文档类型筛选（支持多选）
  - 标签筛选（动态添加/删除）
- **高级选项**: 重新排序、包含元数据
- **预设配置**: 精确搜索、模糊搜索、快速搜索
- **自定义配置**: 保存和加载用户配置

### 2. 搜索结果展示 (`SearchResults`)
- **结果概览**: 总数、处理时间、最高相似度
- **详细结果**: 
  - 排名显示（前3名有星标）
  - 相似度分数（百分比和进度条）
  - 文档信息（标题、类型、块索引）
  - 内容预览（支持关键词高亮）
  - 元数据展示
- **交互功能**: 
  - 展开/收起内容
  - 复制内容到剪贴板
  - 查看完整元数据

### 3. 搜索历史功能 (`SearchHistory`)
- **历史记录**: 最近20次搜索记录
- **记录信息**: 查询、结果数、处理时间、最高相似度
- **快速操作**: 
  - 重新搜索
  - 查看历史结果
  - 清空历史记录
- **结果预览**: 显示最佳匹配片段

### 4. 搜索统计 (`SearchStats`)
- **核心指标**: 搜索次数、平均响应时间、相似度范围
- **性能分析**: 响应性能等级、匹配质量评估
- **详细统计**: 完整的搜索会话统计
- **优化建议**: 基于统计数据的智能建议

### 5. 上下文预览 (`ContextPreview`)
- **多格式导出**: 
  - Markdown格式（便于阅读）
  - JSON格式（便于处理）
  - 对话模版（便于AI助手使用）
- **操作功能**: 复制到剪贴板、下载文件
- **统计信息**: 检索片段数、Token数、平均相似度

### 6. 实时反馈
- **加载状态**: 搜索过程中的loading指示
- **错误处理**: 友好的错误提示和空状态处理
- **成功反馈**: 操作完成后的确认提示

### 7. 用户体验优化
- **响应式设计**: 适配不同屏幕尺寸
- **浮动侧边栏**: 快速统计和导航
- **标签页切换**: 搜索测试、历史记录、统计分析
- **键盘快捷键**: Enter键搜索、快速添加标签

## 组件架构

```
/test
├── page.tsx                 # 主页面
├── useRagTest.ts            # 核心Hook
├── README.md               # 文档
└── components/
    ├── index.ts            # 组件导出
    ├── SearchTestForm.tsx  # 搜索表单
    ├── SearchResults.tsx   # 结果展示
    ├── SearchHistory.tsx   # 历史记录
    ├── SearchStats.tsx     # 统计分析
    └── ContextPreview.tsx  # 上下文预览
```

## 使用方法

1. **配置搜索参数**: 在搜索表单中设置查询文本和相关参数
2. **选择预设或自定义**: 使用预设配置或创建自定义配置
3. **执行搜索**: 点击搜索按钮或使用快捷键
4. **查看结果**: 分析搜索结果、相似度分数和处理时间
5. **使用上下文**: 复制或下载生成的上下文用于进一步处理
6. **分析性能**: 查看历史记录和统计数据优化搜索策略

## 技术特点

- **TypeScript**: 完整类型安全
- **React Hooks**: 现代React开发模式
- **状态管理**: 使用Jotai + Immer进行状态管理
- **UI组件**: 基于shadcn/ui的组件库
- **性能优化**: 防抖搜索、虚拟滚动、懒加载
- **可扩展性**: 模块化设计，易于添加新功能

## 未来扩展

- [ ] 搜索结果可视化图表
- [ ] 批量搜索功能
- [ ] 搜索结果导出
- [ ] A/B测试支持
- [ ] 实时搜索建议
- [ ] 高级过滤器