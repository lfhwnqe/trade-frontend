<context>
# Overview  
MMC Trading 是一个专业的交易记录与分析管理系统，帮助个人投资者和交易员系统化地记录、管理和分析各类交易数据。系统提供完整的交易生命周期管理，从市场分析到交易执行再到复盘总结，旨在提升投资决策质量和交易表现。

# Core Features  
- **用户认证系统**：安全的邮箱验证注册、登录和会话管理
- **交易记录管理**：支持真实交易和模拟交易的完整记录，包括市场分析、入场计划、执行记录和复盘总结
- **数据查询与分析**：多维度筛选、排序、分页的交易数据查询，支持绩效分析和图表展示
- **响应式设计**：完美适配桌面端和移动端设备的现代化界面

# User Experience  
- **目标用户**：个人投资者、交易员、需要系统化管理交易记录的专业人士
- **核心用户流程**：注册/登录 → 添加交易记录 → 管理和查询交易 → 分析和复盘
- **设计原则**：专业性、简洁性、易用性，符合金融交易专业习惯
</context>
<PRD>
# Technical Architecture  
- **前端框架**：Next.js 15 with App Router, React 19, TypeScript
- **UI 组件**：shadcn/ui + Tailwind CSS + Radix UI
- **状态管理**：Jotai + Immer 原子化状态管理
- **API 通信**：Next.js API Routes 代理模式，HTTP-only Cookie 认证
- **数据处理**：TanStack React Table 用于复杂表格功能
- **开发工具**：ESLint, TypeScript 严格模式, Turbopack

# Development Roadmap  
## 当前状态（已完成）
- ✅ 项目基础架构和配置
- ✅ 用户认证系统（注册、登录、邮箱验证）
- ✅ API 代理层和认证中间件
- ✅ 基础 UI 组件库集成
- ✅ 交易记录 CRUD 功能
- ✅ 真实交易和模拟交易模块
- ✅ 数据表格（排序、筛选、分页）
- ✅ 响应式布局和移动端适配

## 下一阶段优化
- 🔄 代码重构和模块化改进
- 🔄 性能优化和用户体验提升
- 🔄 数据分析和图表功能增强
- 🔄 测试覆盖率提升
- 🔄 文档和部署优化

## 未来增强功能
- 📋 高级数据分析和可视化
- 📋 交易策略管理和回测
- 📋 多账户管理
- 📋 数据导入导出功能
- 📋 移动端原生应用

# Logical Dependency Chain
1. **基础架构**：项目配置、TypeScript、基础组件（已完成）
2. **认证系统**：用户注册、登录、会话管理（已完成）
3. **核心功能**：交易记录 CRUD、数据管理（已完成）
4. **用户体验**：响应式设计、表格功能（已完成）
5. **代码质量**：重构、测试、文档（当前重点）
6. **性能优化**：加载优化、缓存策略
7. **高级功能**：数据分析、可视化、导入导出

# Risks and Mitigations  
- **技术债务**：trade 和 simulation 模块存在重复代码，需要重构抽象公共逻辑
- **类型同步**：前后端类型定义需要保持同步，建议使用 schema 验证
- **性能问题**：大数据量下的表格性能需要优化，考虑虚拟滚动
- **测试覆盖**：缺少单元测试和集成测试，需要补充关键业务逻辑测试

# Appendix  
- **当前技术栈版本**：Next.js 15.3.2, React 19, TypeScript 5.x
- **部署平台**：推荐 Vercel，支持 Next.js 原生优化
- **开发环境**：Node.js + Yarn, 支持 Turbopack 加速开发
- **代码规范**：ESLint + TypeScript 严格模式
</PRD>